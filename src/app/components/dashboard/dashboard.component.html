
  <div class="dashboard-container">
    <div class="dashboard-header">
      <div class="header-content">
        <h1>Dashboard</h1>
        <p>Real-time insights and analytics</p>
      </div>
      
      <div class="header-filters">
        <div class="filter-group">
          <label>Time Range</label>
          <select [(ngModel)]="filters.quickDateRange" (change)="onQuickDateChange()" class="filter-select">
            <option value="last7days">Last 7 Days</option>
            <option value="last30days">Last 30 Days</option>
          </select>
        </div>
      </div>
    </div>
  
    <div class="loading-state" *ngIf="loading">
      <div class="spinner"></div>
      <p>Loading dashboard...</p>
    </div>
  
    <div class="dashboard-content" *ngIf="!loading && stats">
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon stat-icon-primary">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
              <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-label">Total Events</div>
            <div class="stat-value">{{ stats.totalEvents }}</div>
          </div>
        </div>
  
        <div class="stat-card">
          <div class="stat-icon stat-icon-warning">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-label">Critical & High</div>
            <div class="stat-value">{{ getCriticalHighCount() }}</div>
          </div>
        </div>
  
        <div class="stat-card">
          <div class="stat-icon stat-icon-success">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-label">Categories</div>
            <div class="stat-value">{{ stats.eventsByCategory.length }}</div>
          </div>
        </div>
  
        <div class="stat-card">
          <div class="stat-icon stat-icon-info">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-label">Avg per Day</div>
            <div class="stat-value">{{ getAvgEventsPerDay() }}</div>
          </div>
        </div>
        <div>
           <button type="submit" class="btn btn-primary" (click)="logout()">
            Logout
          </button>
          </div>
      </div>
  
      <!-- Charts Grid -->
      <div class="charts-grid">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Events by Category</h3>
          </div>
          <div class="chart-container">
            <canvas #categoryChart></canvas>
          </div>
        </div>
  
        <div class="chart-card">
          <div class="chart-header">
            <h3>Events by Severity</h3>
          </div>
          <div class="chart-container">
            <canvas #severityChart></canvas>
          </div>
        </div>
  
        <div class="chart-card chart-card-wide">
          <div class="chart-header">
            <h3>Trend Over Time</h3>
          </div>
          <div class="chart-container">
            <canvas #trendChart></canvas>
          </div>
        </div>
      </div>
  
      <!-- Insights Section -->
      <div class="insights-section">
        <div class="insights-header">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
          <h2>Key Insights</h2>
        </div>
        
        <div class="insights-grid">
          <div class="insight-card" *ngFor="let insight of stats.insights">
            <div class="insight-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
              </svg>
            </div>
            <p>{{ insight }}</p>
          </div>
          
          <div class="insight-card insight-card-empty" *ngIf="stats.insights.length === 0">
            <p>No insights available for the current filter selection.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  